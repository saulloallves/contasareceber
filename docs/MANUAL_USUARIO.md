# Manual do Usu√°rio - Sistema de Cobran√ßa

## üëã Bem-vindo ao Sistema de Cobran√ßa

Este manual ir√° gui√°-lo atrav√©s de todas as funcionalidades do sistema, desde o upload de planilhas at√© o acompanhamento de cobran√ßas.

---

## üöÄ Primeiros Passos

### 1. Acesso ao Sistema
1. Acesse a URL do sistema fornecida pela equipe t√©cnica
2. Fa√ßa login com suas credenciais
3. Voc√™ ser√° direcionado para o Dashboard principal

### 2. Navega√ß√£o Principal
O sistema possui as seguintes se√ß√µes:
- **üìä Dashboard**: Vis√£o geral e m√©tricas
- **üéØ Painel Operacional**: Gest√£o de cobran√ßas
- **üìÅ Importa√ß√£o**: Upload de planilhas
- **üìù Tratativas**: Hist√≥rico de intera√ß√µes
- **‚öôÔ∏è Configura√ß√µes**: Par√¢metros do sistema
- **üì± WhatsApp Config**: Configura√ß√£o de mensagens
- **üìã Hist√≥rico Envios**: Log de mensagens enviadas

---

## üìä Dashboard

### Vis√£o Geral
O Dashboard apresenta m√©tricas importantes sobre a inadimpl√™ncia:

#### Cards Principais
- **üí∞ Total em Aberto**: Soma de todos os valores em aberto
- **‚úÖ Total Quitado**: Valores j√° recebidos
- **ü§ù Em Negocia√ß√£o**: T√≠tulos sendo negociados
- **üìà Taxa de Convers√£o**: Efici√™ncia das cobran√ßas

#### Gr√°ficos Dispon√≠veis
- **Pizza**: Distribui√ß√£o por status (em aberto, quitado, negociando)
- **Barras**: Valores por faixa de atraso
- **Linha**: Evolu√ß√£o mensal de recebimentos
- **Tabela**: Ranking das unidades mais inadimplentes

### Como Usar os Filtros
1. Clique em "Filtros" no topo da p√°gina
2. Selecione os crit√©rios desejados:
   - **Data In√≠cio/Fim**: Per√≠odo de an√°lise
   - **Status**: Tipo de cobran√ßa
   - **CNPJ**: Franqueado espec√≠fico
3. Clique em "Aplicar Filtros"

### Exportar Dados
1. Clique no bot√£o "Exportar" no canto superior direito
2. O arquivo CSV ser√° baixado automaticamente
3. Abra no Excel para an√°lises detalhadas

---

## üéØ Painel Operacional

### Vis√£o Geral
O Painel Operacional √© onde voc√™ gerencia o dia a dia das cobran√ßas.

### Filtros Avan√ßados
#### Filtros Dispon√≠veis:
- **Status**: em_aberto, negociando, cobrado, quitado, novo
- **Busca**: Digite nome do cliente ou CNPJ
- **Faixa de Atraso**: 0-30, 31-90, 91-180, 180+ dias
- **Valor**: M√≠nimo e m√°ximo
- **Vencimento**: Per√≠odo de vencimento

#### Como Aplicar Filtros:
1. Preencha os campos desejados na se√ß√£o "Filtros"
2. Clique em "Aplicar Filtros"
3. Use "Limpar" para resetar todos os filtros

### A√ß√µes R√°pidas

#### üëÅÔ∏è Ver Hist√≥rico
1. Clique no √≠cone de olho na linha da cobran√ßa
2. Uma janela mostrar√° toda a timeline de intera√ß√µes
3. Voc√™ pode ver mensagens enviadas, observa√ß√µes e mudan√ßas de status

#### ‚úÖ Marcar como Quitado
1. Clique no √≠cone de check verde
2. Preencha:
   - **Valor Pago**: Quanto foi recebido
   - **Forma de Pagamento**: PIX, transfer√™ncia, etc.
   - **Observa√ß√µes**: Detalhes adicionais
3. Clique em "Confirmar Quita√ß√£o"

#### üìù Adicionar Observa√ß√£o
1. Clique no √≠cone de documento
2. Digite sua observa√ß√£o no campo de texto
3. Opcionalmente, altere o status da cobran√ßa
4. Clique em "Salvar Observa√ß√£o"

#### üì§ Reenviar Mensagem
1. Clique no √≠cone de mensagem (apenas se houver telefone)
2. A mensagem ser√° enviada automaticamente via WhatsApp
3. O resultado aparecer√° como notifica√ß√£o

#### üìÖ Gerar Agendamento
1. Clique no √≠cone de calend√°rio
2. Ser√° aberto o link do Calendly em nova aba
3. O franqueado poder√° agendar uma reuni√£o

### Ordena√ß√£o
- Clique no cabe√ßalho de qualquer coluna para ordenar
- Uma seta indicar√° a dire√ß√£o da ordena√ß√£o (crescente/decrescente)
- Por padr√£o, a tabela √© ordenada por "Dias em Atraso" (decrescente)

### Pagina√ß√£o
- Use os bot√µes "Anterior" e "Pr√≥xima" para navegar
- O sistema mostra 20 registros por p√°gina
- O total de registros √© exibido na parte inferior

---

## üìÅ Importa√ß√£o de Planilhas

### Preparando a Planilha

#### Colunas Obrigat√≥rias:
- **CLIENTE**: Nome ou raz√£o social do franqueado
- **CNPJ**: CNPJ com ou sem formata√ß√£o
- **VALOR**: Valor original do t√≠tulo
- **DATA_VENCIMENTO**: Data de vencimento (DD/MM/AAAA)

#### Colunas Opcionais:
- **VALOR_RECEBIDO**: Valor j√° pago (padr√£o: 0)
- **TELEFONE**: Para envio de WhatsApp

#### Formatos Aceitos:
- **.xlsx** (Excel)
- **.xml** (XML)

### Processo de Upload

#### Passo a Passo:
1. Acesse a se√ß√£o "Importa√ß√£o"
2. Clique em "Clique para selecionar arquivo" ou arraste o arquivo
3. Aguarde o upload e valida√ß√£o
4. Clique em "Processar Planilha"
5. Aguarde o processamento (pode levar alguns minutos)

#### Resultado da Importa√ß√£o:
Ap√≥s o processamento, voc√™ ver√°:
- **Total de Registros**: Quantas linhas foram processadas
- **Novos T√≠tulos**: Cobran√ßas criadas
- **Atualizados**: T√≠tulos que j√° existiam e foram atualizados
- **Quitados**: T√≠tulos marcados como quitados (n√£o estavam na planilha)

### Tratamento de Erros

#### Erros Comuns:
- **CNPJ inv√°lido**: Verifique se tem 14 d√≠gitos
- **Data inv√°lida**: Use formato DD/MM/AAAA
- **Valor inv√°lido**: Use n√∫meros com ponto ou v√≠rgula decimal
- **Coluna ausente**: Verifique se todas as colunas obrigat√≥rias est√£o presentes

#### Como Corrigir:
1. Anote os erros mostrados na tela
2. Corrija a planilha
3. Fa√ßa um novo upload

---

## üìù Tratativas

### Visualizando o Hist√≥rico
1. Acesse "Tratativas" no menu
2. Voc√™ pode ver:
   - **Hist√≥rico espec√≠fico**: De uma cobran√ßa (via Painel Operacional)
   - **Todas as tratativas**: Vis√£o geral do sistema

### Tipos de Tratativas
- **üì§ Mensagem Autom√°tica**: Enviada pelo sistema
- **üí¨ Resposta Franqueado**: Intera√ß√£o do cliente
- **üìÖ Agendamento**: Reuni√£o marcada
- **üìù Observa√ß√£o Manual**: Anota√ß√£o da equipe
- **üìã Proposta Enviada**: Proposta de negocia√ß√£o
- **‚úÖ Proposta Aceita**: Acordo fechado
- **üí∞ Marcado como Quitado**: Pagamento confirmado

### Adicionando Observa√ß√µes
1. No hist√≥rico de uma cobran√ßa espec√≠fica
2. Clique em "Adicionar Observa√ß√£o"
3. Preencha:
   - **Canal**: Como foi a intera√ß√£o (WhatsApp, telefone, etc.)
   - **Observa√ß√£o**: Descri√ß√£o detalhada
   - **Alterar Status**: Se necess√°rio
4. Clique em "Salvar Observa√ß√£o"

### Filtros de Tratativas
- **Tipo**: Filtrar por tipo de intera√ß√£o
- **Canal**: WhatsApp, telefone, interno, etc.
- **Usu√°rio**: Quem fez a intera√ß√£o
- **Per√≠odo**: Data da intera√ß√£o

---

## ‚öôÔ∏è Configura√ß√µes Administrativas

> **‚ö†Ô∏è Aten√ß√£o**: Esta se√ß√£o √© restrita a usu√°rios com perfil Admin ou Financeiro Master.

### Par√¢metros Financeiros

#### Percentual de Multa
- **Valor**: 0 a 100%
- **Padr√£o**: 2%
- **Aplica√ß√£o**: Sobre o valor original quando vencido

#### Juros Di√°rio
- **Valor**: 0 a 10%
- **Padr√£o**: 0,033% ao dia
- **Aplica√ß√£o**: Por dia de atraso

#### Tempo de Toler√¢ncia
- **Valor**: 0 a 30 dias
- **Padr√£o**: 3 dias
- **Aplica√ß√£o**: Dias ap√≥s vencimento antes de iniciar cobran√ßa

### Par√¢metros de Envio

#### Dia do Disparo Mensal
- **Valor**: 1 a 31
- **Padr√£o**: 15
- **Aplica√ß√£o**: Dia do m√™s para envio autom√°tico

#### Canal de Envio
- **WhatsApp**: Apenas WhatsApp
- **E-mail**: Apenas e-mail
- **Ambos**: WhatsApp e e-mail

#### Link de Agendamento
- **Formato**: URL v√°lida
- **Exemplo**: https://calendly.com/sua-empresa/negociacao
- **Aplica√ß√£o**: Link enviado nas mensagens

### Template da Mensagem

#### Vari√°veis Dispon√≠veis:
- `{{cliente}}`: Nome do franqueado
- `{{valor_atualizado}}`: Valor com multa e juros
- `{{data_vencimento}}`: Data de vencimento
- `{{link_negociacao}}`: Link do Calendly

#### Exemplo de Template:
```
Ol√°, {{cliente}}!

Consta um d√©bito da sua unidade, vencido em {{data_vencimento}}.
Valor atualizado at√© hoje: *{{valor_atualizado}}*

Deseja regularizar? {{link_negociacao}}

_Esta √© uma mensagem autom√°tica do sistema de cobran√ßa._
```

### Como Alterar Configura√ß√µes
1. Acesse "Configura√ß√µes Administrativas"
2. Altere os valores desejados
3. Visualize o preview da mensagem
4. Clique em "Salvar Altera√ß√µes"
5. As mudan√ßas s√£o aplicadas imediatamente

### Fun√ß√µes Especiais

#### Resetar Configura√ß√µes
- Volta todos os valores para o padr√£o
- **‚ö†Ô∏è Cuidado**: N√£o pode ser desfeito

#### Exportar Configura√ß√µes
- Baixa um arquivo JSON com backup das configura√ß√µes
- √ötil para documenta√ß√£o ou restaura√ß√£o

---

## üì± Configura√ß√£o WhatsApp

### Configura√ß√£o Inicial

#### Informa√ß√µes Necess√°rias:
1. **Token de Acesso**: Obtido no Facebook Developers
2. **Phone Number ID**: ID do n√∫mero configurado
3. **Link de Negocia√ß√£o**: URL do Calendly

#### Passo a Passo:
1. Acesse "WhatsApp Config" no menu
2. Preencha os campos obrigat√≥rios
3. Clique em "Testar Conex√£o" para validar
4. Se o teste passar, clique em "Salvar Configura√ß√µes"

### Como Obter as Credenciais

#### 1. Criar App no Facebook Developers
1. Acesse developers.facebook.com
2. Crie um novo app Business
3. Adicione o produto "WhatsApp Business API"

#### 2. Configurar N√∫mero
1. No painel do app, v√° para WhatsApp > Getting Started
2. Configure um n√∫mero de telefone
3. Anote o Phone Number ID

#### 3. Gerar Token
1. Ainda no painel, gere um token de acesso
2. **‚ö†Ô∏è Importante**: Use um token permanente para produ√ß√£o

### Testando a Configura√ß√£o
1. Ap√≥s preencher os dados, clique em "Testar Conex√£o"
2. Se aparecer "Conex√£o estabelecida", est√° funcionando
3. Se houver erro, verifique as credenciais

### Preview da Mensagem
- A se√ß√£o inferior mostra como a mensagem aparecer√°
- Use para validar o template antes de enviar

---

## üìã Hist√≥rico de Envios

### Visualizando Envios
1. Acesse "Hist√≥rico Envios" no menu
2. Voc√™ ver√° todas as mensagens enviadas pelo sistema

### Informa√ß√µes Dispon√≠veis
- **Cliente**: Nome do franqueado
- **Telefone**: N√∫mero de destino
- **Data/Hora**: Quando foi enviado
- **Status**: Sucesso, falha ou reagendado
- **Mensagem**: Conte√∫do enviado
- **Erro**: Detalhes se houve falha

### Filtros de Hist√≥rico
- **Per√≠odo**: Data de in√≠cio e fim
- **Status**: Sucesso, falha, reagendado
- **Cliente**: Nome espec√≠fico

### Estat√≠sticas
Na parte inferior, voc√™ v√™:
- **Enviados com Sucesso**: Quantidade e percentual
- **Falhas no Envio**: Problemas ocorridos
- **Reagendados**: Envios que ser√£o tentados novamente

---

## üîê Perfis e Permiss√µes

### Tipos de Usu√°rio

#### üëë Admin
- Acesso total ao sistema
- Pode alterar configura√ß√µes
- Gerencia usu√°rios
- Faz importa√ß√µes

#### üíº Financeiro Master
- Configura√ß√µes do sistema
- Importa√ß√£o de planilhas
- Painel operacional completo
- Dashboards e relat√≥rios

#### üë®‚Äçüíº Financeiro Operador
- Painel operacional
- Tratativas e observa√ß√µes
- Dashboards b√°sicos
- **N√£o pode**: Configurar ou importar

#### üëÅÔ∏è Leitura
- Apenas visualiza√ß√£o
- Dashboards e relat√≥rios
- Consulta de cobran√ßas
- **N√£o pode**: Alterar dados

### Verificando Suas Permiss√µes
- Seu perfil determina quais menus voc√™ v√™
- Se n√£o conseguir acessar algo, verifique com o administrador
- Algumas fun√ß√µes podem estar desabilitadas conforme seu perfil

---

## üÜò Solu√ß√£o de Problemas

### Problemas Comuns

#### "Erro ao carregar dados"
1. Verifique sua conex√£o com a internet
2. Atualize a p√°gina (F5)
3. Se persistir, contate o suporte

#### "Planilha com estrutura inv√°lida"
1. Verifique se as colunas obrigat√≥rias est√£o presentes
2. Confira os nomes das colunas (CLIENTE, CNPJ, VALOR, DATA_VENCIMENTO)
3. Valide o formato do arquivo (.xlsx ou .xml)

#### "Falha no envio WhatsApp"
1. Verifique as configura√ß√µes da API
2. Confirme se o telefone est√° correto
3. Verifique se h√° cr√©ditos na conta WhatsApp Business

#### "Acesso negado"
1. Verifique se voc√™ est√° logado
2. Confirme suas permiss√µes com o administrador
3. Tente fazer logout e login novamente

### Quando Contatar o Suporte
- Erros que persistem ap√≥s tentativas de solu√ß√£o
- Problemas com configura√ß√µes t√©cnicas
- D√∫vidas sobre funcionalidades espec√≠ficas
- Solicita√ß√µes de altera√ß√£o de permiss√µes

### Informa√ß√µes para o Suporte
Ao contatar o suporte, tenha em m√£os:
- Seu usu√°rio/e-mail de acesso
- Descri√ß√£o detalhada do problema
- Prints da tela (se poss√≠vel)
- Hor√°rio em que o erro ocorreu

---

## üìû Contatos e Suporte

### Suporte T√©cnico
- **E-mail**: [inserir e-mail de suporte]
- **Telefone**: [inserir telefone]
- **Hor√°rio**: Segunda a sexta, 8h √†s 18h

### Suporte Operacional
- **E-mail**: [inserir e-mail financeiro]
- **Telefone**: [inserir telefone]
- **Hor√°rio**: Segunda a sexta, 8h √†s 18h

### Documenta√ß√£o
- **Manual T√©cnico**: Para desenvolvedores
- **Manual do Usu√°rio**: Este documento
- **API Documentation**: Para integra√ß√µes

---

## üìù Dicas e Boas Pr√°ticas

### Para Importa√ß√£o de Planilhas
- ‚úÖ Sempre fa√ßa backup da planilha original
- ‚úÖ Valide os dados antes do upload
- ‚úÖ Importe semanalmente para manter dados atualizados
- ‚ùå N√£o altere t√≠tulos em "negociando" manualmente

### Para Gest√£o de Cobran√ßas
- ‚úÖ Registre todas as intera√ß√µes como observa√ß√µes
- ‚úÖ Use filtros para focar em faixas de atraso espec√≠ficas
- ‚úÖ Acompanhe o ranking de inadimplentes regularmente
- ‚ùå N√£o marque como quitado sem confirma√ß√£o do pagamento

### Para Configura√ß√µes
- ‚úÖ Teste mudan√ßas em hor√°rios de baixo movimento
- ‚úÖ Documente altera√ß√µes importantes
- ‚úÖ Mantenha backup das configura√ß√µes
- ‚ùå N√£o altere par√¢metros sem entender o impacto

### Para WhatsApp
- ‚úÖ Teste a conex√£o regularmente
- ‚úÖ Monitore o hist√≥rico de envios
- ‚úÖ Mantenha o template de mensagem atualizado
- ‚ùå N√£o envie mensagens fora do hor√°rio comercial

---

*Manual atualizado em: Janeiro 2025*
*Vers√£o: 1.0.0*